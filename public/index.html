<!DOCTYPE html>

<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>AR-1090</title>
    <link rel="stylesheet" href="index.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/3.3.3/aframe/build/aframe-ar-nft.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script
        src="https://unpkg.com/aframe-environment-component@1.2.0/dist/aframe-environment-component.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.7/dat.gui.min.js"></script> -->
    <script
        src="https://raw.githack.com/andreasplesch/aframe-meshline-component/master/dist/aframe-meshline-component.min.js"></script>
    <script src="./libs/my-gps-projected-entity-place.js" defer></script>
    <script src="./systems/world-scale.js"></script>
    <script src="./systems/dump1090-client.js"></script>
    <script src="./systems/flight-pool.js"></script>
    <!-- <script src="./components/curve.js"></script> -->
    <script src="./components/label.js"></script>
    <script src="./components/cursor-listener.js"></script>
    <script src="./components/flight-path.js"></script>
    <script src="./components/fixed-wing.js"></script>
    <script src="./components/aircraft.js"></script>
    <script src="./geometries/aircraft.js"></script>
    <script src="./flightaware/styles.js"></script>
</head>

<body style='margin: 0; overflow: hidden;'>

    <div class="info-fields">
        <div id="position" class="info-field">TEST</div>
        <div id="doeSupported" class="info-field">DOE supported?</div>
        <div id="orientation" class="info-field">Orientation</div>
    </div>

    <a-scene vr-mode-ui="enabled: false" renderer="logarithmicDepthBuffer: true;"
        arjs='sourceType: webcam; videoTexture: true; debugUIEnabled: false;'
        world-scale='distanceScale: 0.01; objectScale: 6; enlargeFarObjects: true' dump1090-client flight-pool>

        <a-assets>
            <a-mixin id="range-ring-mixin" material='color: teal; side: double; transparent: true; opacity: 0.5;'
                position='0 100 0' rotation='90 0 0'>
            </a-mixin>
        </a-assets>

        <a-sphere id="north_marker" radius=10 material="color: red;" position="0 0 -500">
            <a-text value="N" look-at="[gps-projected-camera]" position="0 25 0" scale="100 100 100" align="center">
            </a-text>
        </a-sphere>

        <a-sphere id="east_marker" radius=10 material="color: white;" position="500 0 0">
            <a-text value="E" look-at="[gps-projected-camera]" position="0 25 0" scale="100 100 100" align="center">
            </a-text>
        </a-sphere>

        <a-sphere id="sout_marker" radius=10 material="color: white;" position="0 0 500">
            <a-text value="S" look-at="[gps-projected-camera]" position="0 25 0" scale="100 100 100" align="center">
            </a-text>
        </a-sphere>

        <a-sphere id="west_marker" radius=10 material="color: white;" position="-500 0 0">
            <a-text value="W" look-at="[gps-projected-camera]" position="0 25 0" scale="100 100 100" align="center">
            </a-text>
        </a-sphere>

        <a-ring mixin="range-ring-mixin" radius-inner="97" radius-outer="100" segments-theta=128>
            <a-text value="10km" scale="60 60 60" position="0 97 -10" rotation='90 180 0' color='teal' align='center'>
            </a-text>
        </a-ring>

        <a-ring mixin="range-ring-mixin" radius-inner=" 490" radius-outer="500" segments-theta=64>
            <a-text value="50km" scale="120 120 120" position="0 490 -10" rotation='90 180 0' color='teal'
                align='center'></a-text>
        </a-ring>

        <a-ring mixin="range-ring-mixin" radius-inner="990" radius-outer="1000">
            <a-text value="100km" scale="120 120 120" position="0 990 -10" rotation='90 180 0' color='teal'
                align='center'></a-text>
        </a-ring>

        <a-ring mixin="range-ring-mixin" radius-inner="1490" radius-outer="1500">
            <a-text value="150km" scale="120 120 120" position="0 1490 -10" rotation='90 180 0' color='teal'
                align='center'></a-text>
        </a-ring>

        <a-ring mixin="range-ring-mixin" radius-inner="2990" radius-outer="3000">
            <a-text value="300km" scale="120 120 120" position="0 2990 -10" rotation='90 180 0' color='teal'
                align='center'></a-text>
        </a-ring>

        <!-- <a-entity environment="preset: default"></a-entity> -->
        <!-- look-controls-enabled='false' arjs-look-controls='smoothingFactor: 0.1' -->
        <a-camera rotation-reader
            gps-projected-camera="simulateLatitude: 47.186425; simulateLongitude: -1.572692; gpsMinDistance: 10;">
            <a-entity cursor="fuse: true; fuseTimeout: 1500; rayOrigin: entity;"
                raycaster="far: 10000; interval: 1000; objects: .clickable" position="0 0 -1"
                geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                material="color: #41e65d; shader: flat; opacity: 0.5"
                animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 150; from: 0.1 0.1 0.1; to: 1 1 1"
                animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 1500; from: 1 1 1; to: 0.1 0.1 0.1"
                animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 500; to: 1 1 1">
            </a-entity>
        </a-camera>

    </a-scene>

</body>